# ğŸ“š BUMBA LEARNING - CHANGELOG

## ğŸ¯ VISÃƒO GERAL DA APLICAÃ‡ÃƒO
**Bumba Learning** Ã© uma plataforma web de aprendizado de idiomas estilo Duolingo, desenvolvida como MVP monolÃ­tico usando JHipster 8.11.0, React 18 + TailwindCSS, Spring Boot, Java 17 e PostgreSQL.

**Objetivo**: Criar uma experiÃªncia gamificada de aprendizado de idiomas com foco em inglÃªs (Fase 1), permitindo que professores criem conteÃºdo, gerenciem turmas e acompanhem o progresso dos alunos.

**Tema**: Bumba remete a um boi (touro) nordestino de cores verde e colorido.

---

## âœ… STATUS ATUAL DO PROJETO

### **ConcluÃ­do:**
1. âœ… Projeto JHipster inicializado (versÃ£o 8.11.0)
2. âœ… Modelo de dados JDL completo criado
3. âœ… Todas as entidades do domÃ­nio geradas (17 entidades)
4. âœ… Repositories, Services, DTOs e Mappers gerados automaticamente
5. âœ… Resources REST bÃ¡sicos (CRUD) criados para todas as entidades
6. âœ… Estrutura de autenticaÃ§Ã£o e autorizaÃ§Ã£o (User, Authority)

### **Entidades Implementadas:**
- **Perfil**: UserProfile
- **ConteÃºdo**: Topic, Question, Lesson, LessonQuestion
- **Turmas**: ClassRoom, ClassMember, LessonAssignment, StudentLessonProgress
- **Tentativas**: Attempt
- **GamificaÃ§Ã£o**: Achievement, UserAchievement
- **RecomendaÃ§Ã£o**: Recommendation

---

Achievement: Long id, String code, String name, String iconUrl, String description, String criteria
Attempt: Long id ,Boolean isCorrect ,Integer timeSpentSeconds ,Instant attemptedAt ,String answer ,String metadata ,User student ,Question question ,Lesson lesson
Authority: String name, boolean isPersisted
ClassMember: Long id, Instant enrolledAt, ClassRoom classRoom, User student
ClassRoom: Long id, String name, Language language, Instant createdAt, String description, User teacher
Lesson: Long id, String title, Language language, DifficultyLevel level, Integer xpReward, Integer passThreshold, Instant createdAt, String description, Topic topic, User createdBy
LessonAssignment: Long id, Instant assignedAt, Instant dueDate, ClassRoom classRoom, Lesson lesson, User assignedBy
LessonQuestion: Long id, Integer orderIndex, Lesson lesson, Question question
Question: Long id, QuestionType type, Language language, Skill skill, DifficultyLevel level, Instant createdAt, String prompt, String content, String assets, Topic topic, User createdBy
Recommendation: Long id, Instant recommendedAt, Boolean wasCompleted, String reason, User student, Lesson lesson
StudentLessonProgress: Long id, LessonStatus status, Integer score, Integer xpEarned, Instant completedAt, Boolean isLate, User student, Lesson lesson, LessonAssignment assignment
Topic: Long id, String name, Language language, String description
User: Long id, String login, String password, String firstName, String lastName, String email, boolean activated = false, String langKey, String imageUrl, String activationKey, String resetKey, Instant resetDate = null, Set<Authority> authorities
UserAchievement: Long id, Instant unlockedAt, User user, Achievement achievement
UserProfile: Long id, String municipalityCode, UserLevel currentLevel, Integer totalXp, Integer currentStreak, Integer dailyGoalXp, LocalDate lastActivityDate, User user

---

## ğŸ­ PERFIS DE USUÃRIO

### **ROLE_STUDENT** (Aluno)
- Realiza liÃ§Ãµes e ganha XP/conquistas
- Acompanha progresso pessoal e ranking
- Recebe recomendaÃ§Ãµes personalizadas

### **ROLE_TEACHER** (Professor)
- Herda permissÃµes de STUDENT
- Cria/gerencia turmas e atribui liÃ§Ãµes
- Cria questÃµes customizadas
- Visualiza relatÃ³rios de turmas

### **ROLE_ADMIN** (Administrador)
- Acesso total ao sistema
- Gerencia usuÃ¡rios e permissÃµes
- Cria conquistas e tÃ³picos
- Visualiza mÃ©tricas globais

---

## ğŸ—ï¸ ARQUITETURA DO SISTEMA

### **Stack TecnolÃ³gica:**
- **Backend**: Spring Boot 3.x + Java 17 + PostgreSQL
- **Frontend**: React 18 + TypeScript + TailwindCSS
- **AutenticaÃ§Ã£o**: JWT (JH

ipster Security)
- **ORM**: JPA/Hibernate
- **Build**: Maven

### **Estrutura de Pastas:**

**Backend:**
src/main/java/com/bumbatech/bumbalearning/
â”œâ”€â”€ app/logging # Logging
â”œâ”€â”€ config/ # Configuration files and settings
â”œâ”€â”€ domain/ # Entidades JPA
â”œâ”€â”€ management/ # Security Meters
â”œâ”€â”€ repository/ # Repositories Spring Data
â”œâ”€â”€ security/ # Security
â”œâ”€â”€ service/ # LÃ³gica de negÃ³cio
â”‚ â”œâ”€â”€ dto/ # Data Transfer Objects
â”‚ â”œâ”€â”€ mapper/ # MapStruct mappers
â”‚ â”œâ”€â”€ criteria/ # Filtros de busca
â”‚ â””â”€â”€ impl/ # ImplementaÃ§Ãµes de serviÃ§os
â””â”€â”€ web/rest/ # Controllers REST


**Frontend:**
src/main/webapp/app/
â”œâ”€â”€ config/ # axios-interceptor, constants, store ...
â”œâ”€â”€ entities/ # Menu, Reducers, Routes
â”‚   â”œâ”€â”€ achievement
â”‚   â”œâ”€â”€ attempt
â”‚   â”œâ”€â”€ class-member
â”‚   â”œâ”€â”€ class-room
â”‚   â”œâ”€â”€ lesson
â”‚   â”œâ”€â”€ lesson-assignment
â”‚   â”œâ”€â”€ lesson-question
â”‚   â”œâ”€â”€ question
â”‚   â”œâ”€â”€ recommendation
â”‚   â”œâ”€â”€ student-lesson-progress
â”‚   â”œâ”€â”€ topic
â”‚   â”œâ”€â”€ user-achievement
â”‚   â””â”€â”€ user-profile
â”œâ”€â”€ shared/
â”‚ â”œâ”€â”€ auth/ # private route
â”‚ â”œâ”€â”€ error/ # Error page
â”‚ â”œâ”€â”€ jhipster/ # JHipster headers
â”‚ â”œâ”€â”€ model/ # Interfaces TypeScript
â”‚ â”œâ”€â”€ reducers/ # Redux reducers
â”‚ â””â”€â”€ util/ # UtilitÃ¡rios
â””â”€â”€ modules/
    â”œâ”€â”€ account/ # GestÃ£o de conta
    â”œâ”€â”€ login/ # AutenticaÃ§Ã£o
    â”œâ”€â”€ home/ # Dashboard
    â””â”€â”€ administration/ # configuration, docs, logs, health, metrics, user-management
---

## ğŸ“Š MODELO DE DADOS - REGRAS DE NEGÃ“CIO

### **1. Sistema de XP e NÃ­veis**

BEGINNER:

0-500 XP INTERMEDIATE: 501-2000 XP ADVANCED: 2001+ XP

- XP por questÃ£o correta: **10 XP**
- XP por liÃ§Ã£o completa: **100 XP** (configurÃ¡vel em `Lesson.xpReward`)
- NÃ­vel recalculado automaticamente apÃ³s cada liÃ§Ã£o

### **2. Sistema de Streak**
- Conta dias consecutivos com pelo menos 1 liÃ§Ã£o completa
- Timezone: **America/Sao_Paulo**
- Quebra se passar 1 dia sem atividade
- Meta diÃ¡ria padrÃ£o: **50 XP** (configurÃ¡vel)

### **3. ValidaÃ§Ã£o de Respostas**
| Tipo | ValidaÃ§Ã£o |
|------|-----------|
| MULTIPLE_CHOICE | ComparaÃ§Ã£o de Ã­ndice |
| FILL_BLANK | Case-insensitive, trim, aceita sinÃ´nimos |
| LISTENING/READING | ComparaÃ§Ã£o exata |
| WRITING | ComparaÃ§Ã£o com gabarito (variaÃ§Ãµes aceitas) |
| SPEAKING_PLACEHOLDER | Sempre retorna correto (Fase 1) |

### **4. ConclusÃ£o de LiÃ§Ã£o**
- **Threshold padrÃ£o**: 70% de acerto
- **Aprovado**: status=COMPLETED, ganha XP, atualiza streak
- **Reprovado**: status=FAILED, pode refazer apÃ³s 1 hora (cooldown)
- **Atrasado**: `isLate=true` se completar apÃ³s `dueDate`

###

 **5. Conquistas (10 bÃ¡sicas)**
FIRST_LESSON - Primeira liÃ§Ã£o completa STREAK_7 - 7 dias consecutivos STREAK_30 - 30 dias consecutivos XP_100/1000/5000 - Marcos de XP FIRST_ADVANCED - Primeira liÃ§Ã£o avanÃ§ada TEACHER_ASSIGNMENT - Primeira atividade do professor PERFECT_LESSON - 100% de acerto SPEED_DEMON - LiÃ§Ã£o em < 5 minutos


### **6. Sistema de RecomendaÃ§Ã£o**
**Prioridade:**
1. Assignments pendentes (ordenar por `dueDate`)
2. LiÃ§Ãµes do nÃ­vel atual nÃ£o completadas
3. Temas com taxa de acerto < 70%

### **7. Mistura Inteligente de QuestÃµes**
- Embaralhar ordem das questÃµes da liÃ§Ã£o
- Evitar mais de 2 questÃµes consecutivas do mesmo tipo
- Intercalar tipos (ex: MULTIPLE_CHOICE â†’ FILL_BLANK â†’ LISTENING)

---

## ğŸš€ PRÃ“XIMAS ATIVIDADES PRIORITÃRIAS

### **FASE 1: Backend - LÃ³gica de NegÃ³cio Customizada**

#### **1.1 Endpoints Customizados para Aluno**
**Prioridade: CRÃTICA**

Criar em `src/main/java/com/bumbatech/bumbalearning/web/rest/`:

```java
// Student

DashboardResource.java
GET /api/student/dashboard
- Retorna: XP total, streak, nÃ­vel, conquistas, meta diÃ¡ria

// StudentLessonResource.java
GET /api/student/lessons/next
- Implementa lÃ³gica de recomendaÃ§Ã£o

GET /api/student/lessons/{id}/start
- Retorna questÃµes embaralhadas (mistura inteligente)

POST /api/student/lessons/{lessonId}/questions/{questionId}/answer
- Valida resposta e retorna feedback imediato
- Registra Attempt

POST /api/student/lessons/{id}/complete
- Calcula score, atualiza XP/streak/nÃ­vel
- Verifica conquistas

// StudentRankingResource.java
GET /api/student/ranking?municipality={code}&period={week|month|all}
- Query otimizada com Ã­ndices


1.2 ServiÃ§os de ValidaÃ§Ã£o
Prioridade: CRÃTICA

Criar em src/main/java/com/bumbatech/bumbalearning/service/:

- validateMultipleChoice()
- validateFillBlank()
- validateListening()
- validateReading()
- validateWriting()
- validateSpeaking() // placeholder

// XpService.java
- calculateXp

ForQuestion()
- updateUserXp()
- recalculateLevel()

// StreakService.java
- updateStreak()
- checkStreakBreak()

// AchievementCheckService.java
- checkAllAchievements()
- unlockAchievement()

1.3 Endpoints para Professor
Prioridade: ALTA

GET /api/teacher/classes/{id}/report
- RelatÃ³rio de turma com progresso dos alunos

GET /api/teacher/students/{id}/report
- RelatÃ³rio individual detalhado

// TeacherQuestionResource.java
POST /api/teacher/questions
- Criar questÃ£o customizada

// TeacherLessonResource.java
POST /api/teacher/lessons
- Criar liÃ§Ã£o customizada

1.4 Endpoints para Admin
Prioridade: MÃ‰DIA

GET /api/admin/metrics
- MÃ©tricas globais da plataforma

// AdminUserResource.java
PUT /api/admin/users/{id}/roles
- Gerenciar roles de usuÃ¡rios


1.5 Seeds de Dados Iniciais
Prioridade: ALTA

Criar em src/main/resources/config/liquibase/:

-- data/topics.csv (8 tÃ³picos bÃ¡sicos de inglÃªs)
-- data/sample_questions.csv (20-30 questÃµes exemplo)
-- data/sample_lessons.csv (5-10 liÃ§Ãµes exemplo)


FASE 2: Frontend - Interfaces de UsuÃ¡rio
2.1 Dashboard do Aluno
Prioridade: CRÃTICA

Criar em src/main/webapp/app/modules/student/:

dashboard/
â”œâ”€â”€ student-dashboard.tsx       # VisÃ£o geral (XP, streak, nÃ­vel)
â”œâ”€â”€ student-achievements.tsx    # Grid de conquistas
â”œâ”€â”€ student-ranking.tsx         # Ranking global/municipal
â””â”€â”€ student-profile.tsx         # Perfil e configuraÃ§Ãµes

Componentes:

Card de XP e progresso de nÃ­vel
Contador de streak com animaÃ§Ã£o
Lista de conquistas (desbloqueadas/bloqueadas)
GrÃ¡fico de atividade semanal

2.2 Sistema de LiÃ§Ãµes
Prioridade: CRÃTICA

lesson/
â”œâ”€â”€ lesson-list.tsx             # Lista de liÃ§Ãµes disponÃ­veis
â”œâ”€â”€ lesson-player.tsx           # Player de liÃ§Ã£o (questÃµes)
â”œâ”€â”€ question-types/
â”‚   â”œâ”€â”€ multiple-choice.tsx
â”‚   â”œâ”€â”€ fill-blank.tsx
â”‚   â”œâ”€â”€listening.tsx
â”‚   â”œâ”€â”€ reading.tsx
â”‚   â””â”€â”€ writing.tsx
â””â”€â”€ lesson-result.tsx           # Resultado final da liÃ§Ã£o

Features:

Barra de progresso da liÃ§Ã£o
Feedback imediato (correto/incorreto)
AnimaÃ§Ãµes de transiÃ§Ã£o entre questÃµes
Modal de resultado com XP ganho

2.3 Painel do Professor
Prioridade: ALTA

teacher/
â”œâ”€â”€ class-management/
â”‚   â”œâ”€â”€ class-list.tsx
â”‚   â”œâ”€â”€ class-detail.tsx
â”‚   â”œâ”€â”€ class-report.tsx
â”‚   â””â”€â”€ student-report.tsx
â”œâ”€â”€ content-creation/
â”‚   â”œâ”€â”€ question-creator.tsx
â”‚   â””â”€â”€ lesson-creator.tsx
â””â”€â”€ assignment/
    â””â”€â”€ assignment-manager.tsx


Features:

Tabela de alunos com status (no prazo/atrasado/nÃ£o iniciado)
GrÃ¡ficos de progresso da turma
FormulÃ¡rio de criaÃ§Ã£o de questÃµes (todos os tipos)
AtribuiÃ§Ã£o de liÃ§Ãµes com prazo

2.4 Painel do Admin
Prioridade: MÃ‰DIA

admin/
â”œâ”€â”€ metrics-dashboard.tsx       # MÃ©tricas globais
â”œâ”€â”€ user-management.tsx         # GestÃ£o de usuÃ¡rios
â”œâ”€â”€ content-moderation.tsx      # ModeraÃ§Ã£o de questÃµes
â””â”€â”€ achievement-manager.tsx     # Criar/editar conquistas


FASE 3: OtimizaÃ§Ãµes e Melhorias

3.1 Performance
Prioridade: ALTA

 Adicionar Ã­ndices no PostgreSQL (conforme documentado)
 Implementar cache Redis para ranking
 Otimizar queries N+1 com fetch joins
 Implementar paginaÃ§Ã£o em todas as listas

3.2 UX/UI
Prioridade: MÃ‰DIA

 AnimaÃ§Ãµes de feedback (correto/incorreto)
 Sons de feedback (opcional)
 Modo escuro
 Responsividade mobile-first
 Loading states e skeleton screens

3.3 Testes
Prioridade: MÃ‰DIA

 Testes unitÃ¡rios dos serviÃ§os de validaÃ§Ã£o
 Testes de integraÃ§Ã£o dos endpoints customizados
 Testes E2E do fluxo de liÃ§Ã£o completo
 Testes de performance do ranking

ğŸ“‹ CHECKLIST DE IMPLEMENTAÃ‡ÃƒO
Sprint 1: Core do Aluno (2 semanas)
 AnswerValidationService
 XpService + StreakService
 StudentLessonResource (start/answer/complete)
 Student
DashboardResource

 Seeds de dados (achievements, topics, questions)
 Dashboard do aluno (frontend)
 Lesson player (frontend)
Sprint 2: Sistema de GamificaÃ§Ã£o (1 semana)
 AchievementCheckService
 StudentRankingResource
 Ranking component (frontend)
 Achievements component (frontend)
 AnimaÃ§Ãµes de feedback
Sprint 3: Painel do Professor (2 semanas)
 TeacherClassResource (reports)
 TeacherQuestionResource
 TeacherLessonResource
 Class management (frontend)
 Content creation (frontend)
 Assignment manager (frontend)
Sprint 4: Admin e OtimizaÃ§Ãµes (1 semana)
 AdminMetricsResource
 AdminUserResource
 Ãndices PostgreSQL
 Cache Redis
 Testes automatizados
ğŸ”§ CONFIGURAÃ‡Ã•ES TÃ‰CNICAS IMPORTANTES
Ãndices PostgreSQL (Performance CrÃ­tica)

CREATE INDEX idx_user_profile_ranking ON user_profile(total_xp DESC, last_activity_date);
CREATE INDEX idx_user_profile_municipality

 ON user_profile(municipality_code);
CREATE INDEX idx_attempt_student_lesson ON attempt(student_id, lesson_id);
CREATE INDEX idx_progress_student_status ON student_lesson_progress(student_id, status);
CREATE INDEX idx_assignment_class_due ON lesson_assignment(class_room_id, due_date);
CREATE INDEX idx_question_filters ON question(language, level, skill);
CREATE INDEX idx_question_topic ON question(topic_id, level);
CREATE INDEX idx_lesson_filters ON lesson(language, level);
CREATE INDEX idx_lesson_topic ON lesson(topic_id);


Estruturas JSONB
Question.content:

// MULTIPLE_CHOICE
{"options": ["opt1", "opt2", "opt3", "opt4"], "correct_index": 2}

// FILL_BLANK
{"sentence": "I ___ to school", "correct_answers": ["go", "walk"]}

// LISTENING
{"audio_url": "https://...", "question": "What did he say?", "correct_answer": "Hello"}

// READING_COMPREHENSION
{"text": "...", "question": "...", "correct_answer": "..."}

// WRITING
{"prompt": "Describe your day", "sample_answer": "..."}



// SPEAKING_PLACEHOLDER
{"prompt": "Say: Hello, how are you?"}


Question.assets:


[
  {"type": "image", "url": "https://..."},
  {"type": "audio", "url": "https://..."}
]

Achievement.criteria:

{"type": "streak", "value": 7}
{"type": "xp", "value": 1000}
{"type": "lesson_level", "value": "ADVANCED"}
{"type": "lesson_count", "value": 1}
{"type": "assignment_complete", "value": 1}
{"type": "perfect_score", "value": 100}
{"type": "lesson_time", "value": 300}

Attempt.answer:

{"selected_index": 2}  // para mÃºltipla escolha
{"text": "go"}         // para fill blank
{"text": "Hello"}      // para listening/writing

Attempt.metadata:

{"confidence": 0.95, "audio_duration": 3.5}


ğŸ“Š DADOS INICIAIS (Seeds)
1. Authorities

INSERT INTO jhi_authority (name) VALUES ('ROLE_ADMIN');
INSERT INTO jhi_authority (name) VALUES ('ROLE_USER');
INSERT INTO jhi_authority (name) VALUES ('ROLE_STUDENT');
INSERT INTO jhi_authority (name) VALUES ('ROLE_TEACHER');

2. Topics (8 tÃ³picos bÃ¡sicos de inglÃªs)

Greetings (Cumprimentos)
Numbers (NÃºmeros)
Colors (Cores)
Food (Comida)
Family (FamÃ­lia)
Travel (Viagem)
Work (Trabalho)
Hobbies (Hobbies)

3. Achievements (10 conquistas bÃ¡sicas)

FIRST_LESSON       - {"type": "lesson_count", "value": 1}
STREAK_7           - {"type": "streak", "value": 7}
STREAK_30          - {"type": "streak", "value": 30}
XP_100             - {"type": "xp", "value": 100}
XP_1000            - {"type": "xp", "value": 1000}
XP_5000            - {"type": "xp", "value": 5000}
FIRST_ADVANCED     - {"type": "lesson_level", "value": "ADVANCED"}
TEACHER_ASSIGNMENT - {"type": "assignment_complete", "value": 1}
PERFECT_LESSON     - {"type": "perfect_score", "value": 100}
SPEED_DEMON        - {"type": "lesson_time", "value": 300}

4. UserProfile padrÃ£o para novos usuÃ¡rios

currentLevel: BEGINNER
totalXp: 0
currentStreak: 0
dailyGoalXp: 50


ğŸ¯ MÃ‰TRICAS DE SUCESSO DO
MVP

Funcionalidade Core: Aluno consegue completar liÃ§Ã£o e ganhar XP
GamificaÃ§Ã£o: Sistema de streak e conquistas funcionando
Professor: Consegue criar turma, atribuir liÃ§Ã£o e ver relatÃ³rio
Performance: Ranking carrega em < 500ms
UX: Feedback imediato em < 200ms
ğŸš« FORA DO ESCOPO (Fase 1)
Chat com IA (voz/texto)
Aulas ao vivo
Speech-to-Text real (usar placeholder)
Cadastro pÃºblico de usuÃ¡rios
MÃºltiplos idiomas (focar apenas inglÃªs)
App mobile nativo
ğŸ“ PRÃ“XIMA AÃ‡ÃƒO IMEDIATA
ComeÃ§ar por: Implementar AnswerValidationService e StudentLessonResource para permitir que alunos completem liÃ§Ãµes e ganhem XP. Este Ã© o fluxo core da aplicaÃ§Ã£o.

Comandos sugeridos:

# Criar estrutura de serviÃ§os customizados
mkdir -p src/main/java/com/bumbatech/bumbalearning/service/custom
mkdir -p src/main/java/com/bumbatech/bumbalearning/web/rest/student
mkdir -p src/main/java/com/bumbatech/bumbalearning/web/rest/teacher
mkdir -p src/main

/java/com/bumbatech/bumbalearning/web/rest/admin

# Criar estrutura frontend
mkdir -p src/main/webapp/app/modules/student/dashboard
mkdir -p src/main/webapp/app/modules/student/lesson
mkdir -p src/main/webapp/app/modules/teacher
mkdir -p src/main/webapp/app/modules/admin


ğŸ“ HISTÃ“RICO DE MUDANÃ‡AS

v1.0 - Setup Inicial
âœ… Projeto JHipster criado
âœ… Modelo JDL definido e aplicado
âœ… 17 entidades geradas
âœ… CRUD bÃ¡sico funcionando

v2.0 - PrÃ³xima VersÃ£o (Em Planejamento)
 LÃ³gica de negÃ³cio customizada
 Interfaces de usuÃ¡rio
 Sistema de gamificaÃ§Ã£o completo
 Painel do professor
 Seeds de dados
ğŸ”— REFERÃŠNCIAS TÃ‰CNICAS

DocumentaÃ§Ã£o:

JHipster: https://www.jhipster.tech/
Spring Boot: https://spring.io/projects/spring-boot
React: https://react.dev/
PostgreSQL JSONB: https://www.postgresql.org/docs/current/datatype-json.html
PadrÃµes de CÃ³digo:
REST API: Seguir convenÃ§Ãµes RESTful

DTOs: Usar MapStruct para conversÃµes

ValidaÃ§Ã£o: Bean Validation (JSR-380)

SeguranÃ§a: Spring Security + JWT

Frontend: React Hooks + TypeScript

Ãšltima atualizaÃ§Ã£o: 2025-01-XX VersÃ£o do documento: 2.0
ResponsÃ¡vel: Equipe Bumba Learning


