
### **Em Desenvolvimento:**
- XpService - Servi√ßo para calcular e atualizar XP dos usu√°rios
- StreakService - Servi√ßo para gerenciar streak de dias consecutivos


## üöÄ PR√ìXIMAS ATIVIDADES PRIORIT√ÅRIAS

### **FASE 1: Backend - L√≥gica de Neg√≥cio Customizada**

#### **1.1 Endpoints Customizados para Aluno**
**Prioridade: CR√çTICA**

Criar em `src/main/java/com/bumbatech/bumbalearning/web/rest/`:

```java
// Student

DashboardResource.java
GET /api/student/dashboard
- Retorna: XP total, streak, n√≠vel, conquistas, meta di√°ria

// StudentLessonResource.java
GET /api/student/lessons/next
- Implementa l√≥gica de recomenda√ß√£o

GET /api/student/lessons/{id}/start
- Retorna quest√µes embaralhadas (mistura inteligente)

POST /api/student/lessons/{lessonId}/questions/{questionId}/answer
- Valida resposta e retorna feedback imediato
- Registra Attempt

POST /api/student/lessons/{id}/complete
- Calcula score, atualiza XP/streak/n√≠vel
- Verifica conquistas

// StudentRankingResource.java
GET /api/student/ranking?municipality={code}&period={week|month|all}
- Query otimizada com √≠ndices


1.2 Servi√ßos de Valida√ß√£o
Prioridade: CR√çTICA

Criar em src/main/java/com/bumbatech/bumbalearning/service/:

- validateMultipleChoice()
- validateFillBlank()
- validateListening()
- validateReading()
- validateWriting()
- validateSpeaking() // placeholder

// XpService.java
- calculateXp

ForQuestion()
- updateUserXp()
- recalculateLevel()

// StreakService.java
- updateStreak()
- checkStreakBreak()

// AchievementCheckService.java
- checkAllAchievements()
- unlockAchievement()

1.3 Endpoints para Professor
Prioridade: ALTA

GET /api/teacher/classes/{id}/report
- Relat√≥rio de turma com progresso dos alunos

GET /api/teacher/students/{id}/report
- Relat√≥rio individual detalhado

// TeacherQuestionResource.java
POST /api/teacher/questions
- Criar quest√£o customizada

// TeacherLessonResource.java
POST /api/teacher/lessons
- Criar li√ß√£o customizada

1.4 Endpoints para Admin
Prioridade: M√âDIA

GET /api/admin/metrics
- M√©tricas globais da plataforma

// AdminUserResource.java
PUT /api/admin/users/{id}/roles
- Gerenciar roles de usu√°rios


1.5 Seeds de Dados Iniciais
Prioridade: ALTA

Criar em src/main/resources/config/liquibase/:

-- data/topics.csv (8 t√≥picos b√°sicos de ingl√™s)
-- data/sample_questions.csv (20-30 quest√µes exemplo)
-- data/sample_lessons.csv (5-10 li√ß√µes exemplo)


FASE 2: Frontend - Interfaces de Usu√°rio
2.1 Dashboard do Aluno
Prioridade: CR√çTICA

Criar em src/main/webapp/app/modules/student/:

dashboard/
‚îú‚îÄ‚îÄ student-dashboard.tsx       # Vis√£o geral (XP, streak, n√≠vel)
‚îú‚îÄ‚îÄ student-achievements.tsx    # Grid de conquistas
‚îú‚îÄ‚îÄ student-ranking.tsx         # Ranking global/municipal
‚îî‚îÄ‚îÄ student-profile.tsx         # Perfil e configura√ß√µes

Componentes:

Card de XP e progresso de n√≠vel
Contador de streak com anima√ß√£o
Lista de conquistas (desbloqueadas/bloqueadas)
Gr√°fico de atividade semanal

2.2 Sistema de Li√ß√µes
Prioridade: CR√çTICA

lesson/
‚îú‚îÄ‚îÄ lesson-list.tsx             # Lista de li√ß√µes dispon√≠veis
‚îú‚îÄ‚îÄ lesson-player.tsx           # Player de li√ß√£o (quest√µes)
‚îú‚îÄ‚îÄ question-types/
‚îÇ   ‚îú‚îÄ‚îÄ multiple-choice.tsx
‚îÇ   ‚îú‚îÄ‚îÄ fill-blank.tsx
‚îÇ   ‚îú‚îÄ‚îÄlistening.tsx
‚îÇ   ‚îú‚îÄ‚îÄ reading.tsx
‚îÇ   ‚îî‚îÄ‚îÄ writing.tsx
‚îî‚îÄ‚îÄ lesson-result.tsx           # Resultado final da li√ß√£o

Features:

Barra de progresso da li√ß√£o
Feedback imediato (correto/incorreto)
Anima√ß√µes de transi√ß√£o entre quest√µes
Modal de resultado com XP ganho

2.3 Painel do Professor
Prioridade: ALTA

teacher/
‚îú‚îÄ‚îÄ class-management/
‚îÇ   ‚îú‚îÄ‚îÄ class-list.tsx
‚îÇ   ‚îú‚îÄ‚îÄ class-detail.tsx
‚îÇ   ‚îú‚îÄ‚îÄ class-report.tsx
‚îÇ   ‚îî‚îÄ‚îÄ student-report.tsx
‚îú‚îÄ‚îÄ content-creation/
‚îÇ   ‚îú‚îÄ‚îÄ question-creator.tsx
‚îÇ   ‚îî‚îÄ‚îÄ lesson-creator.tsx
‚îî‚îÄ‚îÄ assignment/
    ‚îî‚îÄ‚îÄ assignment-manager.tsx


Features:

Tabela de alunos com status (no prazo/atrasado/n√£o iniciado)
Gr√°ficos de progresso da turma
Formul√°rio de cria√ß√£o de quest√µes (todos os tipos)
Atribui√ß√£o de li√ß√µes com prazo

2.4 Painel do Admin
Prioridade: M√âDIA

admin/
‚îú‚îÄ‚îÄ metrics-dashboard.tsx       # M√©tricas globais
‚îú‚îÄ‚îÄ user-management.tsx         # Gest√£o de usu√°rios
‚îú‚îÄ‚îÄ content-moderation.tsx      # Modera√ß√£o de quest√µes
‚îî‚îÄ‚îÄ achievement-manager.tsx     # Criar/editar conquistas


FASE 3: Otimiza√ß√µes e Melhorias

3.1 Performance
Prioridade: ALTA

 Adicionar √≠ndices no PostgreSQL (conforme documentado)
 Implementar cache Redis para ranking
 Otimizar queries N+1 com fetch joins
 Implementar pagina√ß√£o em todas as listas

3.2 UX/UI
Prioridade: M√âDIA

 Anima√ß√µes de feedback (correto/incorreto)
 Sons de feedback (opcional)
 Modo escuro
 Responsividade mobile-first
 Loading states e skeleton screens


üìã CHECKLIST DE IMPLEMENTA√á√ÉO

Sprint 1: Core do Aluno (2 semanas)

 XpService + StreakService
 StudentLessonResource (start/answer/complete)
 Student
DashboardResource

 Seeds de dados (achievements, topics, questions)
 Dashboard do aluno (frontend)
 Lesson player (frontend)

Sprint 2: Sistema de Gamifica√ß√£o (1 semana)
 AchievementCheckService
 StudentRankingResource
 Ranking component (frontend)
 Achievements component (frontend)
 Anima√ß√µes de feedback

Sprint 3: Painel do Professor (2 semanas)

 TeacherClassResource (reports)
 TeacherQuestionResource
 TeacherLessonResource
 Class management (frontend)
 Content creation (frontend)
 Assignment manager (frontend)

Sprint 4: Admin e Otimiza√ß√µes (1 semana)

 AdminMetricsResource
 AdminUserResource
 √çndices PostgreSQL
 Cache Redis
 Testes automatizados

üîß CONFIGURA√á√ïES T√âCNICAS IMPORTANTES

√çndices PostgreSQL (Performance Cr√≠tica)

CREATE INDEX idx_user_profile_ranking ON user_profile(total_xp DESC, last_activity_date);
CREATE INDEX idx_user_profile_municipality

 ON user_profile(municipality_code);
CREATE INDEX idx_attempt_student_lesson ON attempt(student_id, lesson_id);
CREATE INDEX idx_progress_student_status ON student_lesson_progress(student_id, status);
CREATE INDEX idx_assignment_class_due ON lesson_assignment(class_room_id, due_date);
CREATE INDEX idx_question_filters ON question(language, level, skill);
CREATE INDEX idx_question_topic ON question(topic_id, level);
CREATE INDEX idx_lesson_filters ON lesson(language, level);
CREATE INDEX idx_lesson_topic ON lesson(topic_id);


Estruturas JSONB
Question.content:

// MULTIPLE_CHOICE
{"options": ["opt1", "opt2", "opt3", "opt4"], "correct_index": 2}

// FILL_BLANK
{"sentence": "I ___ to school", "correct_answers": ["go", "walk"]}

// LISTENING
{"audio_url": "https://...", "question": "What did he say?", "correct_answer": "Hello"}

// READING_COMPREHENSION
{"text": "...", "question": "...", "correct_answer": "..."}

// WRITING
{"prompt": "Describe your day", "sample_answer": "..."}



// SPEAKING_PLACEHOLDER
{"prompt": "Say: Hello, how are you?"}


Question.assets:


[
  {"type": "image", "url": "https://..."},
  {"type": "audio", "url": "https://..."}
]

Achievement.criteria:

{"type": "streak", "value": 7}
{"type": "xp", "value": 1000}
{"type": "lesson_level", "value": "ADVANCED"}
{"type": "lesson_count", "value": 1}
{"type": "assignment_complete", "value": 1}
{"type": "perfect_score", "value": 100}
{"type": "lesson_time", "value": 300}

Attempt.answer:

{"selected_index": 2}  // para m√∫ltipla escolha
{"text": "go"}         // para fill blank
{"text": "Hello"}      // para listening/writing

Attempt.metadata:

{"confidence": 0.95, "audio_duration": 3.5}


üìä DADOS INICIAIS (Seeds)
1. Authorities

INSERT INTO jhi_authority (name) VALUES ('ROLE_ADMIN');
INSERT INTO jhi_authority (name) VALUES ('ROLE_USER');
INSERT INTO jhi_authority (name) VALUES ('ROLE_STUDENT');
INSERT INTO jhi_authority (name) VALUES ('ROLE_TEACHER');

2. Topics (8 t√≥picos b√°sicos de ingl√™s)

Greetings (Cumprimentos)
Numbers (N√∫meros)
Colors (Cores)
Food (Comida)
Family (Fam√≠lia)
Travel (Viagem)
Work (Trabalho)
Hobbies (Hobbies)

3. Achievements (10 conquistas b√°sicas)

FIRST_LESSON       - {"type": "lesson_count", "value": 1}
STREAK_7           - {"type": "streak", "value": 7}
STREAK_30          - {"type": "streak", "value": 30}
XP_100             - {"type": "xp", "value": 100}
XP_1000            - {"type": "xp", "value": 1000}
XP_5000            - {"type": "xp", "value": 5000}
FIRST_ADVANCED     - {"type": "lesson_level", "value": "ADVANCED"}
TEACHER_ASSIGNMENT - {"type": "assignment_complete", "value": 1}
PERFECT_LESSON     - {"type": "perfect_score", "value": 100}
SPEED_DEMON        - {"type": "lesson_time", "value": 300}

4. UserProfile padr√£o para novos usu√°rios

currentLevel: BEGINNER
totalXp: 0
currentStreak: 0
dailyGoalXp: 50
