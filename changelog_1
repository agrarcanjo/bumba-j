
Prompt para Desenvolvimento do MVP Bumba Learning
Contexto e Objetivo
Voc√™ √© um agente desenvolvedor full stack s√™nior respons√°vel por criar o modelo de dados JDL para o MVP da plataforma "Bumba Learning" -
 uma aplica√ß√£o web de aprendizado de idiomas estilo Duolingo. Bumba remete a um boi (touro) nodertino de cores verde e colorido.

Premissas:
‚Ä¢	O projeto JHipster j√° possui as entidades User e Authority
‚Ä¢	Interface e textos institucionais: portugu√™s do Brasil
‚Ä¢	Conte√∫do pedag√≥gico (li√ß√µes): idioma definido pelo professor (fase 1 foca em ingl√™s)
‚Ä¢	Arquitetura: mon√≥lito (entrega r√°pida)
‚Ä¢	Stack: Desenvolvida como MVP monol√≠tico usando JHipster (8.11.0) React 18 + TailwindCSS / Spring Boot / Java 17 / PostgreSQL
---------------------------


## üë• Perfis de Usu√°rio

### 1. **Aluno (Student)**
- Realiza li√ß√µes de idiomas
- Ganha XP e conquistas
- Acompanha progresso e ranking
- Recebe recomenda√ß√µes personalizadas

### 2. **Professor (Teacher)**
- Cria e gerencia turmas
- Atribui li√ß√µes para turmas
- Acompanha progresso dos alunos
- Cria quest√µes e li√ß√µes customizadas

### 3. **Admin**
- Gerencia usu√°rios e permiss√µes
- Modera conte√∫do (quest√µes/li√ß√µes)
- Visualiza m√©tricas globais
- Cria conquistas e t√≥picos

---

1. PERFIS E AUTENTICA√á√ÉO
Roles (usar Authority do JHipster)
‚Ä¢	ROLE_STUDENT: acesso a li√ß√µes, dashboard pessoal, ranking
‚Ä¢	ROLE_TEACHER: tudo de STUDENT + gerenciar turmas pr√≥prias, criar quest√µes, relat√≥rios de suas turmas
‚Ä¢	ROLE_ADMIN: acesso total + gest√£o de usu√°rios, banco de quest√µes global, relat√≥rios globais

Seeds e Dados Iniciais
INSERT INTO jhi_authority (name) VALUES ('ROLE_ADMIN');
INSERT INTO jhi_authority (name) VALUES ('ROLE_USER');
INSERT INTO jhi_authority (name) VALUES ('ROLE_STUDENT');
INSERT INTO jhi_authority (name) VALUES ('ROLE_TEACHER');

UserProfile (estende User)

Relacionamento: OneToOne com User
- municipality_code (String, c√≥digo IBGE, obrigat√≥rio)
- current_level (enum: BEGINNER, INTERMEDIATE, ADVANCED)
- total_xp (Integer, default: 0)
- current_streak (Integer, default: 0)
- daily_goal_xp (Integer, default: 50)
- last_activity_date (LocalDate)

Regra de n√≠veis baseada em XP:
‚Ä¢	BEGINNER: 0-500 XP
‚Ä¢	INTERMEDIATE: 501-2000 XP
‚Ä¢	ADVANCED: 2001+ XP

________________________________________
2. ESTRUTURA DE CONTE√öDO
Topic (Tema - entidade normalizada)
- id
- name (String, ex: "Greetings", "Food", "Travel")
- description (Text)
- language (enum: ENGLISH, SPANISH, FRENCH, etc)
Question (Banco de Quest√µes)
- id
- type (enum: MULTIPLE_CHOICE, FILL_BLANK, LISTENING, READING_COMPREHENSION, WRITING, SPEAKING_PLACEHOLDER)
- language (enum: ENGLISH, SPANISH, etc)
- skill (enum: READING, WRITING, LISTENING, SPEAKING)
- level (enum: EASY, INTERMEDIATE, ADVANCED)
- topic_id (ManyToOne ‚Üí Topic)
- prompt (Text, enunciado da quest√£o)
- content (JSONB, estrutura espec√≠fica por tipo):
  * MULTIPLE_CHOICE: {"options": ["opt1", "opt2", "opt3", "opt4"], "correct_index": 2}
  * FILL_BLANK: {"sentence": "I ___ to school", "correct_answers": ["go", "walk"]}
  * LISTENING: {"audio_url": "https://...", "question": "What did he say?", "correct_answer": "Hello"}
  * READING_COMPREHENSION: {"text": "...", "question": "...", "correct_answer": "..."}
  * WRITING: {"prompt": "Describe your day", "sample_answer": "..."}
  * SPEAKING_PLACEHOLDER: {"prompt": "Say: Hello, how are you?"}
- assets (JSONB, array de URLs): [{"type": "image", "url": "..."}, {"type": "audio", "url": "..."}]
- created_by (ManyToOne ‚Üí User, professor ou admin que criou)
- created_at (Instant)
Observa√ß√µes:
‚Ä¢	Assets armazenam apenas URLs (CDN/S3) e metadata
‚Ä¢	Exerc√≠cios de fala (SPEAKING) s√£o placeholder na fase 1 (sempre retornam "correto")
Lesson (Li√ß√£o - agrupador de quest√µes)
- id
- title (String)
- description (Text)
- language (enum: ENGLISH, etc)
- level (enum: EASY, INTERMEDIATE, ADVANCED)
- topic_id (ManyToOne ‚Üí Topic)
- xp_reward (Integer, default: 100) // XP ao completar a li√ß√£o
- pass_threshold (Integer, default: 70) // % m√≠nimo de acerto para passar
- created_by (ManyToOne ‚Üí User)
- created_at (Instant)
LessonQuestion (relacionamento N:N entre Lesson e Question)
- lesson_id (ManyToOne ‚Üí Lesson)
- question_id (ManyToOne ‚Üí Question)
- order_index (Integer, ordem da quest√£o na li√ß√£o)
Regra: Uma li√ß√£o t√≠pica cont√©m 5-15 quest√µes do mesmo tema/n√≠vel

________________________________________
3. TURMAS E ASSIGNMENTS
Class (Turma)
- id
- name (String, ex: "Turma A - Ingl√™s B√°sico")
- language (enum: ENGLISH, fase 1 apenas ingl√™s)
- description (Text)
- teacher_id (ManyToOne ‚Üí User, professor respons√°vel)
- created_at (Instant)
ClassMember (Alunos na Turma)
- id
- class_id (ManyToOne ‚Üí Class)
- student_id (ManyToOne ‚Üí User)
- enrolled_at (Instant)
Regras:
‚Ä¢	Um aluno pode estar em m√∫ltiplas turmas
‚Ä¢	Uma turma pertence a 1 professor e foca em 1 idioma
LessonAssignment (Atribui√ß√£o de Li√ß√£o para Turma)
- id
- class_id (ManyToOne ‚Üí Class)
- lesson_id (ManyToOne ‚Üí Lesson)
- assigned_by (ManyToOne ‚Üí User, professor)
- due_date (Instant, prazo para conclus√£o)
- assigned_at (Instant)
StudentLessonProgress (Progresso Individual do Aluno)
- id
- student_id (ManyToOne ‚Üí User)
- lesson_id (ManyToOne ‚Üí Lesson)
- assignment_id (ManyToOne ‚Üí LessonAssignment, nullable se for li√ß√£o recomendada)
- status (enum: NOT_STARTED, IN_PROGRESS, COMPLETED, FAILED)
- score (Integer, % de acerto)
- xp_earned (Integer)
- completed_at (Instant, nullable)
- is_late (Boolean, se completou ap√≥s due_date)
Regras:
‚Ä¢	Ap√≥s prazo, aluno ainda pode completar (mas fica marcado como is_late = true)
‚Ä¢	Dashboard do professor mostra: no prazo (verde), atrasado (amarelo), n√£o iniciado (vermelho)
________________________________________

4. SISTEMA DE TENTATIVAS E VALIDA√á√ÉO
Attempt (Tentativa de Resposta)
- id
- student_id (ManyToOne ‚Üí User)
- question_id (ManyToOne ‚Üí Question)
- lesson_id (ManyToOne ‚Üí Lesson)
- answer (JSONB, resposta do aluno)
- is_correct (Boolean)
- time_spent_seconds (Integer)
- attempted_at (Instant)
- metadata (JSONB, dados extras como confidence score, etc)
Fluxo de Execu√ß√£o de Li√ß√£o:
1.	Aluno inicia li√ß√£o ‚Üí backend retorna quest√µes embaralhadas (mistura inteligente)
2.	Para cada quest√£o:
o	Frontend envia resposta ‚Üí backend valida e retorna feedback imediato
o	Registra Attempt (correto/incorreto, tempo gasto)
o	N√£o permite retry imediato (apenas ao refazer a li√ß√£o completa)
3.	Conclus√£o da li√ß√£o:
o	Threshold: 70% de acerto m√≠nimo (configur√°vel em Lesson.pass_threshold)
o	Se atingir: ganha XP, atualiza streak, marca StudentLessonProgress como COMPLETED
o	Se n√£o atingir: status FAILED, pode refazer ap√≥s 1 hora (cooldown)
Valida√ß√£o de Respostas (backend):
‚Ä¢	M√∫ltipla escolha: compara√ß√£o de √≠ndice
‚Ä¢	Completar frase: compara√ß√£o case-insensitive, trim, aceitar sin√¥nimos da lista correct_answers
‚Ä¢	Listening/Reading: compara√ß√£o exata com correct_answer
‚Ä¢	Escrita livre: compara√ß√£o com gabarito (aceitar varia√ß√µes pr√©-definidas)
‚Ä¢	Fala (STT): placeholder retorna sempre is_correct = true na fase 1
Mistura Inteligente de Quest√µes:
‚Ä¢	Embaralhar ordem das quest√µes da li√ß√£o
‚Ä¢	Evitar mais de 2 quest√µes consecutivas do mesmo tipo
‚Ä¢	Intercalar tipos (ex: MULTIPLE_CHOICE ‚Üí FILL_BLANK ‚Üí LISTENING)
________________________________________

5. GAMIFICA√á√ÉO
Achievement (Conquistas)
- id
- code (String, unique, ex: "STREAK_7", "XP_1000")
- name (String, ex: "Semana Completa")
- description (Text)
- icon_url (String)
- criteria (JSONB, ex: {"type": "streak", "value": 7})
Lista M√≠nima de Conquistas (Fase 1):
1.	FIRST_LESSON: Primeira li√ß√£o completa
2.	STREAK_7: 7 dias consecutivos
3.	STREAK_30: 30 dias consecutivos
4.	XP_100: 100 XP total
5.	XP_1000: 1000 XP total
6.	XP_5000: 5000 XP total
7.	FIRST_ADVANCED: Primeira li√ß√£o avan√ßada completa
8.	TEACHER_ASSIGNMENT: Primeira atividade do professor completa
9.	PERFECT_LESSON: Li√ß√£o com 100% de acerto
10.	SPEED_DEMON: Li√ß√£o completa em menos de 5 minutos
UserAchievement (Conquistas do Usu√°rio)
- id
- user_id (ManyToOne ‚Üí User)
- achievement_id (ManyToOne ‚Üí Achievement)
- unlocked_at (Instant)
Regras de XP e Streak:
‚Ä¢	XP por quest√£o correta: 10 XP (independente do tipo/n√≠vel)
‚Ä¢	XP por li√ß√£o completa: valor definido em Lesson.xp_reward (padr√£o: 100 XP)
‚Ä¢	Streak: conta dias consecutivos com pelo menos 1 li√ß√£o completa
Timezone: America/Sao_Paulo
o	Quebra se passar 1 dia sem atividade (comparar last_activity_date em UserProfile)
‚Ä¢	Meta di√°ria: padr√£o 50 XP (campo daily_goal_xp em UserProfile, configur√°vel por admin no futuro)
________________________________________

6. SISTEMA DE RECOMENDA√á√ÉO
Recommendation (Hist√≥rico e Pr√≥xima Sugest√£o)
- id
- student_id (ManyToOne ‚Üí User)
- lesson_id (ManyToOne ‚Üí Lesson)
- reason (String, ex: "Baseado em performance em 'Greetings'")
- recommended_at (Instant)
- was_completed (Boolean)
L√≥gica de Recomenda√ß√£o (MVP simplificado):
1.	Se aluno tem assignments pendentes ‚Üí priorizar esses (ordenar por due_date)
2.	Se n√£o tem assignments:
o	Buscar li√ß√µes do n√≠vel atual do aluno (baseado em UserProfile.current_level)
o	Filtrar por temas ainda n√£o completados ou com taxa de acerto < 70%
o	Ordenar por: temas com menos tentativas ‚Üí temas mais recentes
3.	N√£o considerar janela de attempts recentes (simplifica√ß√£o da fase 1)
________________________________________

7. RANKING
Ranking (View ou Query Din√¢mica)
N√£o criar entidade materializada na fase 1 - usar query direta no PostgreSQL
Estrutura de Ranking:
‚Ä¢	Ranking Global: top 100 alunos por total_xp (idioma: ingl√™s)
‚Ä¢	Ranking por Munic√≠pio: top 50 por munic√≠pio (filtro por municipality_code)
Filtros Combinados:
‚Ä¢	Munic√≠pio (obrigat√≥rio para ranking municipal)
‚Ä¢	Per√≠odo: √∫ltima semana / √∫ltimo m√™s / todo per√≠odo (filtrar por last_activity_date)
‚Ä¢	Turma (apenas para professores visualizando suas turmas)
C√°lculo:
‚Ä¢	Em tempo real (a cada request de visualiza√ß√£o)
‚Ä¢	Query: SELECT user_id, total_xp, municipality_code FROM user_profile WHERE ... ORDER BY total_xp DESC LIMIT 100
‚Ä¢	Performance: adicionar √≠ndices em (total_xp DESC, last_activity_date) e (municipality_code, total_xp DESC)
Observa√ß√µes:
‚Ä¢	Ranking √© por idioma (fase 1: apenas ingl√™s)
‚Ä¢	N√≠veis das li√ß√µes (EASY/INTERMEDIATE/ADVANCED) d√£o o mesmo XP quando completadas
________________________________________

8. RELAT√ìRIOS (Fase 1 - M√≠nimo)
Professor - Vis√£o de Turma
Endpoint: GET /api/teacher/classes/{classId}/report
Retornar: json
{
  "class_name": "Turma A",
  "total_students": 25,
  "students": [
    {
      "student_id": 123,
      "name": "Jo√£o Silva",
      "assignments_completed": 8,
      "assignments_total": 10,
      "completion_rate": 80,
      "total_xp": 450,
      "last_activity": "2025-10-25T14:30:00Z"
    }
  ]
}
Professor - Vis√£o de Aluno
Endpoint: GET /api/teacher/students/{studentId}/report
Retornar: json
{
  "student_name": "Jo√£o Silva",
  "total_xp": 450,
  "current_level": "INTERMEDIATE",
  "lessons_completed": 12,
  "accuracy_by_skill": {
    "READING": 85,
    "WRITING": 70,
    "LISTENING": 90,
    "SPEAKING": 0
  },
  "avg_time_per_question_seconds": 45,
  "recent_lessons": [...]
}
Admin - M√©tricas Globais
Endpoint: GET /api/admin/metrics
Retornar: json
{
  "total_users": 1500,
  "active_users_last_week": 850,
  "lessons_completed_last_week": 3200,
  "avg_xp_per_user": 320,
  "distribution_by_level": {
    "BEGINNER": 60,
    "INTERMEDIATE": 30,
    "ADVANCED": 10
  },
  "top_municipalities": [
    {"code": "3550308", "name": "S√£o Paulo", "users": 450},
    {"code": "3304557", "name": "Rio de Janeiro", "users": 320}
  ]
}
________________________________________

9. CADASTRO DE USU√ÅRIOS (Fase 1)
Alunos:
‚Ä¢	Cadastrados diretamente no banco de dados (script SQL ou admin manual)
‚Ä¢	Campos obrigat√≥rios: username, email, password_hash, municipality_code
‚Ä¢	Role padr√£o: ROLE_STUDENT
Professores:
‚Ä¢	Cadastrados por admin via painel
‚Ä¢	Adicionar alunos √†s turmas: buscar por email/username (alunos j√° devem existir)
________________________________________
10. APIS ESSENCIAIS (Contratos REST)
Autentica√ß√£o
‚Ä¢	POST /api/authenticate - Login (retorna JWT)
‚Ä¢	GET /api/account - Dados do usu√°rio logado
Aluno
‚Ä¢	GET /api/student/dashboard - Dashboard (XP, streak, n√≠vel, conquistas)
‚Ä¢	GET /api/student/lessons/next - Pr√≥xima li√ß√£o recomendada
‚Ä¢	GET /api/student/lessons/{id}/start - Iniciar li√ß√£o (retorna quest√µes embaralhadas)
‚Ä¢	POST /api/student/lessons/{id}/answer - Enviar resposta de quest√£o
‚Ä¢	POST /api/student/lessons/{id}/complete - Finalizar li√ß√£o
‚Ä¢	GET /api/student/ranking - Ranking (global ou por munic√≠pio)
Professor
‚Ä¢	GET /api/teacher/classes - Listar turmas
‚Ä¢	POST /api/teacher/classes - Criar turma
‚Ä¢	POST /api/teacher/classes/{id}/members - Adicionar aluno √† turma
‚Ä¢	POST /api/teacher/classes/{id}/assignments - Atribuir li√ß√£o
‚Ä¢	GET /api/teacher/classes/{id}/report - Relat√≥rio da turma
‚Ä¢	GET /api/teacher/questions - Listar quest√µes criadas
‚Ä¢	POST /api/teacher/questions - Criar quest√£o
Admin
‚Ä¢	GET /api/admin/users - Listar usu√°rios
‚Ä¢	POST /api/admin/users - Criar usu√°rio
‚Ä¢	PUT /api/admin/users/{id}/roles - Alterar roles
‚Ä¢	GET /api/admin/questions - Banco de quest√µes global
‚Ä¢	GET /api/admin/metrics - M√©tricas globais
‚Ä¢	GET /api/admin/ranking - Ranking com filtros avan√ßados
________________________________________

________________________________________

Paths do system spring:

Domains
src/main/java/com/bumbatech/bumbalearning/domain

Repositories
src/main/java/com/bumbatech/bumbalearning/repository

Services
src/main/java/com/bumbatech/bumbalearning/service
src/main/java/com/bumbatech/bumbalearning/service/criteria
src/main/java/com/bumbatech/bumbalearning/service/dto
src/main/java/com/bumbatech/bumbalearning/service/impl
src/main/java/com/bumbatech/bumbalearning/service/mapper

Resources
src/main/java/com/bumbatech/bumbalearning/web/rest
src/main/java/com/bumbatech/bumbalearning/web/rest/errors

Paths do sistema react:

## Path to shared

Path to shared layout
src/main/webapp/app/shared/layout/footer
src/main/webapp/app/shared/layout/header
src/main/webapp/app/shared/layout/menus
src/main/webapp/app/shared/layout/password

Path to shared model
src/main/webapp/app/shared/model

Path to shared reducers
src/main/webapp/app/shared/reducers

Path to shared util
src/main/webapp/app/shared/util

Path to shared error
src/main/webapp/app/shared/error

## Path to modules
Path to account
src/main/webapp/app/modules/account/activate
src/main/webapp/app/modules/account/password
src/main/webapp/app/modules/account/password-reset
src/main/webapp/app/modules/account/register
src/main/webapp/app/modules/account/settings

Path to login
src/main/webapp/app/modules/login

Path to home
src/main/webapp/app/modules/home

Path to jhipster administration
src/main/webapp/app/modules/administration/configuration
src/main/webapp/app/modules/administration/docs
src/main/webapp/app/modules/administration/health
src/main/webapp/app/modules/administration/logs
src/main/webapp/app/modules/administration/metrics
src/main/webapp/app/modules/administration/user-management


11. PONTOS DE INTEGRA√á√ÉO FUTURA (N√£o Implementar Agora)
Deixar preparado para:
‚Ä¢	Chat com IA (voz/texto): adicionar entidade Conversation e Message
‚Ä¢	Aulas ao vivo: adicionar entidade LiveClass com scheduled_at, meeting_url
‚Ä¢	Speech-to-Text real: substituir placeholder em SPEAKING_PLACEHOLDER

13. VALIDA√á√ïES E REGRAS DE NEG√ìCIO
‚Ä¢	Streak: atualizar em StudentLessonProgress.completed_at (comparar com last_activity_date)
‚Ä¢	XP: somar em UserProfile.total_xp ao completar li√ß√£o
‚Ä¢	N√≠vel: recalcular current_level baseado em total_xp ap√≥s cada li√ß√£o
‚Ä¢	Conquistas: verificar crit√©rios ap√≥s cada a√ß√£o (completar li√ß√£o, ganhar XP, etc)
‚Ä¢	Prazo de assignment: marcar is_late se completed_at > due_date

________________________________________
JDL completo

/**
 * Bumba Learning - MVP
 * Modelo de dados JDL para plataforma de aprendizado de idiomas
 * Vers√£o: 2.0
 *
 * Premissas:
 * - PostgreSQL 12+
 * - JHipster 8.x
 */

// ============================================
// ENUMS
// ============================================

enum UserLevel {
    BEGINNER,      // 0-500 XP
    INTERMEDIATE,  // 501-2000 XP
    ADVANCED       // 2001+ XP
}

enum Language {
    ENGLISH,
    SPANISH,
    FRENCH
}

enum QuestionType {
    MULTIPLE_CHOICE,
    FILL_BLANK,
    LISTENING,
    READING_COMPREHENSION,
    WRITING,
    SPEAKING_PLACEHOLDER
}

enum Skill {
    READING,
    WRITING,
    LISTENING,
    SPEAKING
}

enum DifficultyLevel {
    EASY,
    INTERMEDIATE,
    ADVANCED
}

enum LessonStatus {
    NOT_STARTED,
    IN_PROGRESS,
    COMPLETED,
    FAILED
}

// ============================================
// ENTIDADE: PERFIL DO USU√ÅRIO
// ============================================

/**
 * UserProfile - Estende User do JHipster
 * Relacionamento 1:1 com User
 */
entity UserProfile {
    municipalityCode String required maxlength(7) /** C√≥digo IBGE do munic√≠pio */
    currentLevel UserLevel required /** N√≠vel atual baseado em XP */
    totalXp Integer required min(0) /** XP total acumulado */
    currentStreak Integer required min(0) /** Dias consecutivos de atividade */
    dailyGoalXp Integer required min(10) /** Meta di√°ria de XP (padr√£o: 50) */
    lastActivityDate LocalDate /** Data da √∫ltima atividade */
}

// ============================================
// ENTIDADES: CONTE√öDO PEDAG√ìGICO
// ============================================

/**
 * Topic - Temas de aprendizado (normalizado para reuso)
 */
entity Topic {
    name String required maxlength(100) /** Ex: "Greetings", "Food", "Travel" */
    language Language required /** Idioma do tema */
    description String maxlength(500) /** Descri√ß√£o detalhada do tema */
}

/**
 * Question - Banco de quest√µes
 * Armazena todos os tipos de atividades
 */
entity Question {
    type QuestionType required /** Tipo da quest√£o */
    language Language required /** Idioma da quest√£o */
    skill Skill required /** Habilidade trabalhada */
    level DifficultyLevel required /** N√≠vel de dificuldade */
    createdAt Instant required /** Data de cria√ß√£o */
    prompt String required maxlength(2000) /** Enunciado da quest√£o */
    content TextBlob required /** JSONB - estrutura espec√≠fica por tipo */
    assets TextBlob /** JSONB - estrutura espec√≠fica por tipo */
}

/**
 * Lesson - Li√ß√£o (agrupador de 5-15 quest√µes)
 */
entity Lesson {
    title String required maxlength(200) /** T√≠tulo da li√ß√£o */
    language Language required /** Idioma da li√ß√£o */
    level DifficultyLevel required /** N√≠vel de dificuldade */
    xpReward Integer required min(0) /** XP ao completar (padr√£o: 100) */
    passThreshold Integer required min(0) max(100) /** % m√≠nimo de acerto (padr√£o: 70) */
    createdAt Instant required /** Data de cria√ß√£o */
    description String maxlength(250) /** Descri√ß√£o da li√ß√£o */
}

/**
 * LessonQuestion - Relacionamento N:N entre Lesson e Question
 * Define ordem das quest√µes na li√ß√£o
 */
entity LessonQuestion {
    orderIndex Integer required min(0) /** Ordem da quest√£o na li√ß√£o */
}

// ============================================
// ENTIDADES: TURMAS E ASSIGNMENTS
// ============================================

/**
 * ClassRoom - Turma gerenciada por professor
 */
entity ClassRoom {
    name String required maxlength(200) /** Nome da turma */
    language Language required /** Idioma da turma (fase 1: apenas ingl√™s) */
    createdAt Instant required /** Data de cria√ß√£o */
    description String maxlength(500) /** Descri√ß√£o da turma */
}

/**
 * ClassMember - Alunos matriculados na turma
 */
entity ClassMember {
    enrolledAt Instant required /** Data de matr√≠cula */
}

/**
 * LessonAssignment - Atribui√ß√£o de li√ß√£o para turma
 */
entity LessonAssignment {
    assignedAt Instant required /** Data de atribui√ß√£o */
    dueDate Instant required /** Prazo para conclus√£o */
}

/**
 * StudentLessonProgress - Progresso individual do aluno em li√ß√µes
 */
entity StudentLessonProgress {
    status LessonStatus required /** Status da li√ß√£o */
    score Integer min(0) max(100) /** Percentual de acerto */
    xpEarned Integer min(0) /** XP ganho nesta li√ß√£o */
    completedAt Instant /** Data/hora de conclus√£o */
    isLate Boolean /** Se completou ap√≥s o prazo */
}

// ============================================
// ENTIDADES: TENTATIVAS E VALIDA√á√ÉO
// ============================================

/**
 * Attempt - Registro de cada tentativa de resposta
 */
entity Attempt {
    isCorrect Boolean required /** Se a resposta est√° correta */
    timeSpentSeconds Integer required min(0) /** Tempo gasto na quest√£o */
    attemptedAt Instant required /** Data/hora da tentativa */
    answer TextBlob required /** JSONB - resposta do aluno */
    metadata TextBlob /** JSONB - dados extras (confidence, etc) */
}

// ============================================
// ENTIDADES: GAMIFICA√á√ÉO
// ============================================

/**
 * Achievement - Conquistas dispon√≠veis
 */
entity Achievement {
    code String required unique maxlength(50) /** C√≥digo √∫nico (ex: STREAK_7) */
    name String required maxlength(100) /** Nome da conquista */
    iconUrl String maxlength(500) /** URL do √≠cone */
    description String maxlength(250) /** Descri√ß√£o detalhada */
    criteria TextBlob required /** JSONB - crit√©rios para desbloquear */
}

/**
 * UserAchievement - Conquistas desbloqueadas pelo usu√°rio
 */
entity UserAchievement {
    unlockedAt Instant required /** Data/hora do desbloqueio */
}

// ============================================
// ENTIDADES: RECOMENDA√á√ÉO
// ============================================

/**
 * Recommendation - Hist√≥rico de recomenda√ß√µes de li√ß√µes
 */
entity Recommendation {
    recommendedAt Instant required /** Data/hora da recomenda√ß√£o */
    wasCompleted Boolean required /** Se o aluno completou a li√ß√£o */
    reason String maxlength(500) /** Motivo da recomenda√ß√£o */
}

// ============================================
// RELACIONAMENTOS
// ============================================

// UserProfile ‚Üí User (1:1)
relationship OneToOne {
    UserProfile{user required} to User with builtInEntity
}

// Question ‚Üí Topic (N:1)
relationship ManyToOne {
    Question{topic(name) required} to Topic
}

// Question ‚Üí User (criador) (N:1)
relationship ManyToOne {
    Question{createdBy required} to User with builtInEntity
}

// Lesson ‚Üí Topic (N:1)
relationship ManyToOne {
    Lesson{topic(name) required} to Topic
}

// Lesson ‚Üí User (criador) (N:1)
relationship ManyToOne {
    Lesson{createdBy required} to User with builtInEntity
}

// LessonQuestion ‚Üí Lesson (N:1)
relationship ManyToOne {
    LessonQuestion{lesson(title) required} to Lesson
}

// LessonQuestion ‚Üí Question (N:1)
relationship ManyToOne {
    LessonQuestion{question required} to Question
}

// ClassRoom ‚Üí User (professor) (N:1)
relationship ManyToOne {
    ClassRoom{teacher required} to User with builtInEntity
}

// ClassMember ‚Üí ClassRoom (N:1)
relationship ManyToOne {
    ClassMember{classRoom(name) required} to ClassRoom
}

// ClassMember ‚Üí User (aluno) (N:1)
relationship ManyToOne {
    ClassMember{student required} to User with builtInEntity
}

// LessonAssignment ‚Üí ClassRoom (N:1)
relationship ManyToOne {
    LessonAssignment{classRoom(name) required} to ClassRoom
}

// LessonAssignment ‚Üí Lesson (N:1)
relationship ManyToOne {
    LessonAssignment{lesson(title) required} to Lesson
}

// LessonAssignment ‚Üí User (professor que atribuiu) (N:1)
relationship ManyToOne {
    LessonAssignment{assignedBy required} to User with builtInEntity
}

// StudentLessonProgress ‚Üí User (aluno) (N:1)
relationship ManyToOne {
    StudentLessonProgress{student required} to User with builtInEntity
}

// StudentLessonProgress ‚Üí Lesson (N:1)
relationship ManyToOne {
    StudentLessonProgress{lesson(title) required} to Lesson
}

// StudentLessonProgress ‚Üí LessonAssignment (N:1, nullable)
relationship ManyToOne {
    StudentLessonProgress{assignment} to LessonAssignment
}

// Attempt ‚Üí User (aluno) (N:1)
relationship ManyToOne {
    Attempt{student required} to User with builtInEntity
}

// Attempt ‚Üí Question (N:1)
relationship ManyToOne {
    Attempt{question required} to Question
}

// Attempt ‚Üí Lesson (N:1)
relationship ManyToOne {
    Attempt{lesson(title) required} to Lesson
}

// UserAchievement ‚Üí User (N:1)
relationship ManyToOne {
    UserAchievement{user required} to User with builtInEntity
}

// UserAchievement ‚Üí Achievement (N:1)
relationship ManyToOne {
    UserAchievement{achievement(name) required} to Achievement
}

// Recommendation ‚Üí User (aluno) (N:1)
relationship ManyToOne {
    Recommendation{student required} to User with builtInEntity
}

// Recommendation ‚Üí Lesson (N:1)
relationship ManyToOne {
    Recommendation{lesson(title) required} to Lesson
}

// ============================================
// CONFIGURA√á√ïES DE SERVI√áO
// ============================================

// Gerar servi√ßos com l√≥gica de neg√≥cio
service all with serviceImpl

// Gerar DTOs para todas as entidades
dto all with mapstruct

// Habilitar pagina√ß√£o onde faz sentido
paginate Question, Lesson, ClassRoom, Attempt, Recommendation with pagination

// Habilitar filtros para buscas avan√ßadas
filter UserProfile, Question, Lesson, ClassRoom, StudentLessonProgress, Attempt

// ============================================
// NOTAS DE IMPLEMENTA√á√ÉO
// ============================================

/**
 * CAMPOS JSONB (PostgreSQL):
 *
 * Question.content - Estrutura por tipo:
 * - MULTIPLE_CHOICE: {"options": ["opt1", "opt2", "opt3", "opt4"], "correct_index": 2}
 * - FILL_BLANK: {"sentence": "I ___ to school", "correct_answers": ["go", "walk"]}
 * - LISTENING: {"audio_url": "https://...", "question": "What?", "correct_answer": "Hello"}
 * - READING_COMPREHENSION: {"text": "...", "question": "...", "correct_answer": "..."}
 * - WRITING: {"prompt": "Describe your day", "sample_answer": "..."}
 * - SPEAKING_PLACEHOLDER: {"prompt": "Say: Hello, how are you?"}
 *
 * Question.assets:
 * [{"type": "image", "url": "https://..."}, {"type": "audio", "url": "https://..."}]
 *
 * Achievement.criteria:
 * {"type": "streak", "value": 7}
 * {"type": "xp", "value": 1000}
 * {"type": "lesson_type", "value": "ADVANCED"}
 *
 * Attempt.answer:
 * {"selected_index": 2} // para m√∫ltipla escolha
 * {"text": "go"} // para fill blank
 * {"text": "Hello"} // para listening/writing
 *
 * Attempt.metadata:
 * {"confidence": 0.95, "audio_duration": 3.5}
 */

/**
 * √çNDICES RECOMENDADOS (adicionar manualmente no PostgreSQL):
 *
 * -- Performance de ranking
 * CREATE INDEX idx_user_profile_xp ON user_profile(total_xp DESC);
 * CREATE INDEX idx_user_profile_municipality ON user_profile(municipality_code);
 * CREATE INDEX idx_user_profile_activity ON user_profile(last_activity_date);
 * CREATE INDEX idx_user_profile_ranking ON user_profile(total_xp DESC, last_activity_date);
 *
 * -- Performance de queries de tentativas
 * CREATE INDEX idx_attempt_student_lesson ON attempt(student_id, lesson_id);
 * CREATE INDEX idx_attempt_question ON attempt(question_id);
 * CREATE INDEX idx_attempt_timestamp ON attempt(attempted_at);
 *
 * -- Performance de progresso
 * CREATE INDEX idx_progress_student_status ON student_lesson_progress(student_id, status);
 * CREATE INDEX idx_progress_assignment ON student_lesson_progress(assignment_id);
 * CREATE INDEX idx_progress_completed ON student_lesson_progress(completed_at);
 *
 * -- Performance de assignments
 * CREATE INDEX idx_assignment_class_due ON lesson_assignment(class_id, due_date);
 * CREATE INDEX idx_assignment_lesson ON lesson_assignment(lesson_id);
 *
 * -- Performance de quest√µes
 * CREATE INDEX idx_question_filters ON question(language, level, skill);
 * CREATE INDEX idx_question_topic ON question(topic_id, level);
 *
 * -- Performance de li√ß√µes
 * CREATE INDEX idx_lesson_filters ON lesson(language, level);
 * CREATE INDEX idx_lesson_topic ON lesson(topic_id);
 */

/**
 * REGRAS DE NEG√ìCIO A IMPLEMENTAR NO BACKEND:
 *
 * 1. Atualiza√ß√£o de N√≠vel (UserProfile.currentLevel):
 *    - Recalcular ap√≥s cada li√ß√£o completa baseado em totalXp
 *    - BEGINNER: 0-500 XP
 *    - INTERMEDIATE: 501-2000 XP
 *    - ADVANCED: 2001+ XP
 *
 * 2. Atualiza√ß√£o de Streak (UserProfile.currentStreak):
 *    - Incrementar se lastActivityDate = ontem
 *    - Resetar para 1 se lastActivityDate < ontem
 *    - Manter se lastActivityDate = hoje
 *    - Timezone: America/Sao_Paulo
 *
 * 3. Valida√ß√£o de Respostas (Attempt):
 *    - MULTIPLE_CHOICE: comparar √≠ndice
 *    - FILL_BLANK: case-insensitive, trim, aceitar qualquer correct_answer
 *    - LISTENING/READING: compara√ß√£o exata com correct_answer
 *    - WRITING: compara√ß√£o com sample_answer (aceitar varia√ß√µes)
 *    - SPEAKING_PLACEHOLDER: sempre retornar isCorrect = true
 *
 * 4. Conclus√£o de Li√ß√£o (StudentLessonProgress):
 *    - Calcular score = (acertos / total_quest√µes) * 100
 *    - Se score >= passThreshold:
 *      * status = COMPLETED
 *      * xpEarned = lesson.xpReward
 *      * Atualizar UserProfile.totalXp
 *      * Atualizar UserProfile.currentStreak
 *      * Verificar conquistas
 *    - Se score < passThreshold:
 *      * status = FAILED
 *      * Permitir retry ap√≥s 1 hora
 *
 * 5. Verifica√ß√£o de Conquistas (UserAchievement):
 *    - Ap√≥s cada a√ß√£o relevante, verificar crit√©rios de Achievement
 *    - Se crit√©rio atendido e n√£o existe UserAchievement: criar registro
 *
 * 6. Recomenda√ß√£o de Li√ß√µes:
 *    - Prioridade 1: LessonAssignment pendentes (status != COMPLETED)
 *    - Prioridade 2: Li√ß√µes do n√≠vel atual n√£o completadas
 *    - Prioridade 3: Li√ß√µes de temas com taxa de acerto < 70%
 *    - Ordenar por: menos tentativas ‚Üí mais recentes
 *
 * 7. Mistura Inteligente de Quest√µes:
 *    - Embaralhar LessonQuestion.orderIndex
 *    - Evitar mais de 2 quest√µes consecutivas do mesmo tipo
 *    - Algoritmo: shuffle + reordenar se houver 3+ consecutivas
 *
 * 8. Marca√ß√£o de Atraso (StudentLessonProgress.isLate):
 *    - Se completedAt > assignment.dueDate: isLate = true
 *    - Se assignment √© null (li√ß√£o recomendada): isLate = false
 */

/**
 * DADOS INICIAIS (Seeds):
 *
 * 1. Achievement - 10 conquistas b√°sicas:
 *    - FIRST_LESSON: {"type": "lesson_count", "value": 1}
 *    - STREAK_7: {"type": "streak", "value": 7}
 *    - STREAK_30: {"type": "streak", "value": 30}
 *    - XP_100: {"type": "xp", "value": 100}
 *    - XP_1000: {"type": "xp", "value": 1000}
 *    - XP_5000: {"type": "xp", "value": 5000}
 *    - FIRST_ADVANCED: {"type": "lesson_level", "value": "ADVANCED"}
 *    - TEACHER_ASSIGNMENT: {"type": "assignment_complete", "value": 1}
 *    - PERFECT_LESSON: {"type": "perfect_score", "value": 100}
 *    - SPEED_DEMON: {"type": "lesson_time", "value": 300}
 *
 * 2. Topic - Temas b√°sicos de ingl√™s:
 *    - Greetings (Cumprimentos)
 *    - Numbers (N√∫meros)
 *    - Colors (Cores)
 *    - Food (Comida)
 *    - Family (Fam√≠lia)
 *    - Travel (Viagem)
 *    - Work (Trabalho)
 *    - Hobbies (Hobbies)
 *
 * 3. UserProfile padr√£o para novos usu√°rios:
 *    - currentLevel: BEGINNER
 *    - totalXp: 0
 *    - currentStreak: 0
 *    - dailyGoalXp: 50
 */

/**
 * ENDPOINTS REST SUGERIDOS:
 *
 * Autentica√ß√£o:
 * POST   /api/authenticate
 * GET    /api/account
 *
 * Aluno:
 * GET    /api/student/dashboard
 * GET    /api/student/lessons/next
 * GET    /api/student/lessons/{id}/start
 * POST   /api/student/lessons/{lessonId}/questions/{questionId}/answer
 * POST   /api/student/lessons/{id}/complete
 * GET    /api/student/ranking
 * GET    /api/student/achievements
 *
 * Professor:
 * GET    /api/teacher/classes
 * POST   /api/teacher/classes
 * GET    /api/teacher/classes/{id}
 * POST   /api/teacher/classes/{id}/members
 * DELETE /api/teacher/classes/{classId}/members/{memberId}
 * POST   /api/teacher/classes/{id}/assignments
 * GET    /api/teacher/classes/{id}/report
 * GET    /api/teacher/students/{id}/report
 * GET    /api/teacher/questions
 * POST   /api/teacher/questions
 * PUT    /api/teacher/questions/{id}
 * DELETE /api/teacher/questions/{id}
 * GET    /api/teacher/lessons
 * POST   /api/teacher/lessons
 *
 * Admin:
 * GET    /api/admin/users
 * POST   /api/admin/users
 * PUT    /api/admin/users/{id}
 * DELETE /api/admin/users/{id}
 * PUT    /api/admin/users/{id}/roles
 * GET    /api/admin/questions
 * PUT    /api/admin/questions/{id}
 * DELETE /api/admin/questions/{id}
 * GET    /api/admin/lessons
 * GET    /api/admin/topics
 * POST   /api/admin/topics
 * GET    /api/admin/metrics
 * GET    /api/admin/ranking
 * GET    /api/admin/achievements
 * POST   /api/admin/achievements
 */

## Passos criados:
1. cria√ß√£o do projeto Jhipster
2. cria√ß√£o do modelo de dados JDL
3. execu√ß√£o do modelo de dados e cria√ß√£o das entidades.


## üìù Pr√≥ximos Passos Sugeridos
1. Implementar endpoints REST customizados
2. Criar servi√ßos de valida√ß√£o de respostas
3. Implementar l√≥gica de XP/Streak/N√≠veis
4. Desenvolver sistema de recomenda√ß√£o
5. Criar telas React para aluno/professor/admin
6. Implementar seeds de dados iniciais
