De acordo com os arquivos changelog_context e changelog_done, entenda o contexto e execute a prÃ³xima aÃ§Ã£o imediata conforme esse documento de TODO.
ApÃ³s implementaÃ§Ã£o, atualize os arquivos de changelog_done com as atividades concluÃ­das, changelog_context (caso necessÃ¡rio)
e o changelog_todo com as aÃ§Ãµes feitas e defina a prÃ³xima atividade.

## ğŸš€ PRÃ“XIMAS ATIVIDADES PRIORITÃRIAS

v2.2 - PrÃ³xima VersÃ£o (Em Desenvolvimento)
ğŸ”„ XpService - Calcular e atualizar XP dos usuÃ¡rios
ğŸ”„ StreakService - Gerenciar streak de dias consecutivos
â³ AchievementCheckService - Verificar e desbloquear conquistas
â³ StudentLessonResource - Endpoints para liÃ§Ãµes do aluno
â³ DashboardResource - Endpoint para dashboard do aluno
â³ Seeds de dados iniciais
â³ Interfaces de usuÃ¡rio (frontend)

v3.0 - Futuro (Planejado)
â³ Painel do professor
â³ Painel do admin
â³ OtimizaÃ§Ãµes de performance


ğŸ“ PRÃ“XIMA AÃ‡ÃƒO IMEDIATA
ComeÃ§ar por: Implementar AnswerValidationService (feito) e StudentLessonResource para permitir que alunos completem liÃ§Ãµes e ganhem XP. Este Ã© o fluxo core da aplicaÃ§Ã£o.

Comandos sugeridos:

# Criar estrutura de serviÃ§os customizados
mkdir -p src/main/java/com/bumbatech/bumbalearning/service/custom
mkdir -p src/main/java/com/bumbatech/bumbalearning/web/rest/student
mkdir -p src/main/java/com/bumbatech/bumbalearning/web/rest/teacher
mkdir -p src/main

/java/com/bumbatech/bumbalearning/web/rest/admin

# Criar estrutura frontend
mkdir -p src/main/webapp/app/modules/student/dashboard
mkdir -p src/main/webapp/app/modules/student/lesson
mkdir -p src/main/webapp/app/modules/teacher
mkdir -p src/main/webapp/app/modules/admin


### **FASE 1: Backend - LÃ³gica de NegÃ³cio Customizada**

#### **1.1 Endpoints Customizados para Aluno**
**Prioridade: CRÃTICA**

Criar em `src/main/java/com/bumbatech/bumbalearning/web/rest/`:

```java
// Student

DashboardResource.java
GET /api/student/dashboard
- Retorna: XP total, streak, nÃ­vel, conquistas, meta diÃ¡ria

// StudentLessonResource.java
GET /api/student/lessons/next
- Implementa lÃ³gica de recomendaÃ§Ã£o

GET /api/student/lessons/{id}/start
- Retorna questÃµes embaralhadas (mistura inteligente)

POST /api/student/lessons/{lessonId}/questions/{questionId}/answer
- Valida resposta e retorna feedback imediato
- Registra Attempt

POST /api/student/lessons/{id}/complete
- Calcula score, atualiza XP/streak/nÃ­vel
- Verifica conquistas

// StudentRankingResource.java
GET /api/student/ranking?municipality={code}&period={week|month|all}
- Query otimizada com Ã­ndices


1.2 ServiÃ§os de ValidaÃ§Ã£o
Prioridade: CRÃTICA

Criar em src/main/java/com/bumbatech/bumbalearning/service/:

- validateMultipleChoice()
- validateFillBlank()
- validateListening()
- validateReading()
- validateWriting()
- validateSpeaking() // placeholder

// XpService.java
- calculateXp

ForQuestion()
- updateUserXp()
- recalculateLevel()

// StreakService.java
- updateStreak()
- checkStreakBreak()

// AchievementCheckService.java
- checkAllAchievements()
- unlockAchievement()

1.3 Endpoints para Professor
Prioridade: ALTA

GET /api/teacher/classes/{id}/report
- RelatÃ³rio de turma com progresso dos alunos

GET /api/teacher/students/{id}/report
- RelatÃ³rio individual detalhado

// TeacherQuestionResource.java
POST /api/teacher/questions
- Criar questÃ£o customizada

// TeacherLessonResource.java
POST /api/teacher/lessons
- Criar liÃ§Ã£o customizada

1.4 Endpoints para Admin
Prioridade: MÃ‰DIA

GET /api/admin/metrics
- MÃ©tricas globais da plataforma

// AdminUserResource.java
PUT /api/admin/users/{id}/roles
- Gerenciar roles de usuÃ¡rios


1.5 Seeds de Dados Iniciais
Prioridade: ALTA

Criar em src/main/resources/config/liquibase/:

-- data/topics.csv (8 tÃ³picos bÃ¡sicos de inglÃªs)
-- data/sample_questions.csv (20-30 questÃµes exemplo)
-- data/sample_lessons.csv (5-10 liÃ§Ãµes exemplo)


FASE 2: Frontend - Interfaces de UsuÃ¡rio
2.1 Dashboard do Aluno
Prioridade: CRÃTICA

Criar em src/main/webapp/app/modules/student/:

dashboard/
â”œâ”€â”€ student-dashboard.tsx       # VisÃ£o geral (XP, streak, nÃ­vel)
â”œâ”€â”€ student-achievements.tsx    # Grid de conquistas
â”œâ”€â”€ student-ranking.tsx         # Ranking global/municipal
â””â”€â”€ student-profile.tsx         # Perfil e configuraÃ§Ãµes

Componentes:

Card de XP e progresso de nÃ­vel
Contador de streak com animaÃ§Ã£o
Lista de conquistas (desbloqueadas/bloqueadas)
GrÃ¡fico de atividade semanal

2.2 Sistema de LiÃ§Ãµes
Prioridade: CRÃTICA

lesson/
â”œâ”€â”€ lesson-list.tsx             # Lista de liÃ§Ãµes disponÃ­veis
â”œâ”€â”€ lesson-player.tsx           # Player de liÃ§Ã£o (questÃµes)
â”œâ”€â”€ question-types/
â”‚   â”œâ”€â”€ multiple-choice.tsx
â”‚   â”œâ”€â”€ fill-blank.tsx
â”‚   â”œâ”€â”€listening.tsx
â”‚   â”œâ”€â”€ reading.tsx
â”‚   â””â”€â”€ writing.tsx
â””â”€â”€ lesson-result.tsx           # Resultado final da liÃ§Ã£o

Features:

Barra de progresso da liÃ§Ã£o
Feedback imediato (correto/incorreto)
AnimaÃ§Ãµes de transiÃ§Ã£o entre questÃµes
Modal de resultado com XP ganho

2.3 Painel do Professor
Prioridade: ALTA

teacher/
â”œâ”€â”€ class-management/
â”‚   â”œâ”€â”€ class-list.tsx
â”‚   â”œâ”€â”€ class-detail.tsx
â”‚   â”œâ”€â”€ class-report.tsx
â”‚   â””â”€â”€ student-report.tsx
â”œâ”€â”€ content-creation/
â”‚   â”œâ”€â”€ question-creator.tsx
â”‚   â””â”€â”€ lesson-creator.tsx
â””â”€â”€ assignment/
    â””â”€â”€ assignment-manager.tsx


Features:

Tabela de alunos com status (no prazo/atrasado/nÃ£o iniciado)
GrÃ¡ficos de progresso da turma
FormulÃ¡rio de criaÃ§Ã£o de questÃµes (todos os tipos)
AtribuiÃ§Ã£o de liÃ§Ãµes com prazo

2.4 Painel do Admin
Prioridade: MÃ‰DIA

admin/
â”œâ”€â”€ metrics-dashboard.tsx       # MÃ©tricas globais
â”œâ”€â”€ user-management.tsx         # GestÃ£o de usuÃ¡rios
â”œâ”€â”€ content-moderation.tsx      # ModeraÃ§Ã£o de questÃµes
â””â”€â”€ achievement-manager.tsx     # Criar/editar conquistas


FASE 3: OtimizaÃ§Ãµes e Melhorias

3.1 Performance
Prioridade: ALTA

 Adicionar Ã­ndices no PostgreSQL (conforme documentado)
 Implementar cache Redis para ranking
 Otimizar queries N+1 com fetch joins
 Implementar paginaÃ§Ã£o em todas as listas

3.2 UX/UI
Prioridade: MÃ‰DIA

 AnimaÃ§Ãµes de feedback (correto/incorreto)
 Sons de feedback (opcional)
 Modo escuro
 Responsividade mobile-first
 Loading states e skeleton screens


ğŸ“‹ CHECKLIST DE IMPLEMENTAÃ‡ÃƒO

Sprint 1: Core do Aluno (2 semanas)

 XpService + StreakService
 StudentLessonResource (start/answer/complete)
 Student
DashboardResource

 Seeds de dados (achievements, topics, questions)
 Dashboard do aluno (frontend)
 Lesson player (frontend)

Sprint 2: Sistema de GamificaÃ§Ã£o (1 semana)
 AchievementCheckService
 StudentRankingResource
 Ranking component (frontend)
 Achievements component (frontend)
 AnimaÃ§Ãµes de feedback

Sprint 3: Painel do Professor (2 semanas)

 TeacherClassResource (reports)
 TeacherQuestionResource
 TeacherLessonResource
 Class management (frontend)
 Content creation (frontend)
 Assignment manager (frontend)

Sprint 4: Admin e OtimizaÃ§Ãµes (1 semana)

 AdminMetricsResource
 AdminUserResource
 Ãndices PostgreSQL
 Cache Redis
 Testes automatizados


Estruturas JSONB
Question.content:

// MULTIPLE_CHOICE
{"options": ["opt1", "opt2", "opt3", "opt4"], "correct_index": 2}

// FILL_BLANK
{"sentence": "I ___ to school", "correct_answers": ["go", "walk"]}

// LISTENING
{"audio_url": "https://...", "question": "What did he say?", "correct_answer": "Hello"}

// READING_COMPREHENSION
{"text": "...", "question": "...", "correct_answer": "..."}

// WRITING
{"prompt": "Describe your day", "sample_answer": "..."}



// SPEAKING_PLACEHOLDER
{"prompt": "Say: Hello, how are you?"}


Question.assets:

[
  {"type": "image", "url": "https://..."},
  {"type": "audio", "url": "https://..."}
]

Achievement.criteria:

{"type": "streak", "value": 7}
{"type": "xp", "value": 1000}
{"type": "lesson_level", "value": "ADVANCED"}
{"type": "lesson_count", "value": 1}
{"type": "assignment_complete", "value": 1}
{"type": "perfect_score", "value": 100}
{"type": "lesson_time", "value": 300}

Attempt.answer:

{"selected_index": 2}  // para mÃºltipla escolha
{"text": "go"}         // para fill blank
{"text": "Hello"}      // para listening/writing

Attempt.metadata:

{"confidence": 0.95, "audio_duration": 3.5}


ğŸ“Š DADOS INICIAIS (Seeds)
1. Authorities

INSERT INTO jhi_authority (name) VALUES ('ROLE_ADMIN');
INSERT INTO jhi_authority (name) VALUES ('ROLE_USER');
INSERT INTO jhi_authority (name) VALUES ('ROLE_STUDENT');
INSERT INTO jhi_authority (name) VALUES ('ROLE_TEACHER');


2. Topics (8 tÃ³picos bÃ¡sicos de inglÃªs)

Greetings (Cumprimentos)
Numbers (NÃºmeros)
Colors (Cores)
Food (Comida)
Family (FamÃ­lia)
Travel (Viagem)
Work (Trabalho)
Hobbies (Hobbies)

3. Achievements (10 conquistas bÃ¡sicas)

FIRST_LESSON       - {"type": "lesson_count", "value": 1}
STREAK_7           - {"type": "streak", "value": 7}
STREAK_30          - {"type": "streak", "value": 30}
XP_100             - {"type": "xp", "value": 100}
XP_1000            - {"type": "xp", "value": 1000}
XP_5000            - {"type": "xp", "value": 5000}
FIRST_ADVANCED     - {"type": "lesson_level", "value": "ADVANCED"}
TEACHER_ASSIGNMENT - {"type": "assignment_complete", "value": 1}
PERFECT_LESSON     - {"type": "perfect_score", "value": 100}
SPEED_DEMON        - {"type": "lesson_time", "value": 300}

4. UserProfile padrÃ£o para novos usuÃ¡rios

currentLevel: BEGINNER
totalXp: 0
currentStreak: 0
dailyGoalXp: 50
